{"ast":null,"code":"import _regeneratorRuntime from \"/home/diego/code/galeria/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/diego/code/galeria/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.splice.js\";\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar axios = require('axios').default;\n\nimport ShowImage from './ShowImage.vue';\nexport default {\n  components: {\n    ShowImage: ShowImage\n  },\n  name: \"GalleryTest\",\n  data: function data() {\n    return {\n      gallery: [],\n      photos: [],\n      counter: 0\n    };\n  },\n  mounted: function mounted() {\n    this.getPhotos();\n  },\n  methods: {\n    scroll: function scroll() {\n      var _this = this;\n\n      //detecto el final del scroll para cargar mas imagenes\n      window.onscroll = function () {\n        var bottomOfWindow = document.documentElement.scrollTop + window.innerHeight === document.documentElement.offsetHeight;\n\n        if (bottomOfWindow) {\n          _this.loadPhotos();\n        }\n      };\n    },\n    getPhotos: function getPhotos() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get('https://jsonplaceholder.typicode.com/photos').then(function (response) {\n                  if (response.data.lenght !== 0) {\n                    _this2.gallery = response.data;\n\n                    _this2.loadPhotos();\n                  }\n\n                  _this2.scroll();\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    loadPhotos: function loadPhotos() {\n      //cargamos las imagenes de 41 en 41\n      var elementsToCharge = 0;\n\n      if (this.counter + 41 <= this.gallery.length) {\n        //si no me salgo del limite del array cargo 41 fotos mas\n        elementsToCharge = this.counter + 41;\n      } else {\n        // si me salgo del array cargo los elementos restantes\n        elementsToCharge = this.gallery.length - this.counter - 1;\n      }\n\n      for (this.counter; this.counter <= elementsToCharge; this.counter++) {\n        //cargo los elementos a mostrar\n        this.photos.push(this.gallery[this.counter]);\n      }\n    },\n    remove: function remove(item) {\n      //eliminamos el elemento del array\n      this.photos.splice(item, 1);\n\n      if (this.photos.length <= 41) {\n        //en caso que el numero de elementos sea menor que x cargo mas elementos automaticamente\n        this.loadPhotos();\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;AAeA;;AAEA;AACA;EACAA;IAAAC;EAAA,CADA;EAEAC,mBAFA;EAGAC,IAHA,kBAGA;IACA;MACAC,WADA;MAEAC,UAFA;MAGAC;IAHA;EAKA,CATA;EAUAC,OAVA,qBAUA;IACA;EACA,CAZA;EAcAC;IACAC,MADA,oBACA;MAAA;;MAAA;MACAC;QACA;;QACA;UACA;QACA;MACA,CALA;IAMA,CARA;IASAC,SATA,uBASA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACAC;kBACA;oBACA;;oBACA;kBACA;;kBACA;gBACA,CANA,CADA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAQA,CAjBA;IAkBAC,UAlBA,wBAkBA;MAAA;MACA;;MACA;QAAA;QACAC;MACA,CAFA,MAEA;QAAA;QACAA;MACA;;MACA;QAAA;QACA;MACA;IACA,CA5BA;IA6BAC,MA7BA,kBA6BAC,IA7BA,EA6BA;MAAA;MACA;;MACA;QAAA;QACA;MACA;IACA;EAlCA;AAdA","names":["components","ShowImage","name","data","gallery","photos","counter","mounted","methods","scroll","window","getPhotos","axios","loadPhotos","elementsToCharge","remove","item"],"sourceRoot":"src/components","sources":["Gallery.vue"],"sourcesContent":["<template>\n  <v-container>\n    <div class=\"pa-6 text-center\">\n      Galeria\n    </div>\n       <v-row>\n      <v-col cols=\"6\" md=\"3\" sm=\"4\" lg=\"2\" v-for=\"(photo, index) in photos\" :key=\"photo.id\">\n          <show-image :photo=\"photo\" @remove=\"remove(index)\">\n          </show-image>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nconst axios = require('axios').default;\n\nimport ShowImage from './ShowImage.vue'\n  export default {\n    components: { ShowImage },\n    name: \"GalleryTest\",\n    data() {\n      return{\n        gallery: [],\n        photos: [],\n        counter: 0,\n      }\n    },\n    mounted () {\n      this.getPhotos()\n    },\n\n    methods:{\n      scroll () { //detecto el final del scroll para cargar mas imagenes\n        window.onscroll = () => {        \n          let bottomOfWindow = document.documentElement.scrollTop + window.innerHeight === document.documentElement.offsetHeight\n          if (bottomOfWindow) {\n           this.loadPhotos()\n          }\n        };\n      },\n      async getPhotos() { //cargamos la galeria\n        await axios.get('https://jsonplaceholder.typicode.com/photos').then(response => {\n          if(response.data.lenght!==0){\n            this.gallery=response.data\n               this.loadPhotos()\n          }\n          this.scroll()\n        })\n      },\n      loadPhotos() {  //cargamos las imagenes de 41 en 41\n        let elementsToCharge = 0\n        if((this.counter+41) <= this.gallery.length){ //si no me salgo del limite del array cargo 41 fotos mas\n          elementsToCharge = this.counter + 41\n        }else{  // si me salgo del array cargo los elementos restantes\n          elementsToCharge = this.gallery.length-this.counter-1\n        }\n        for(this.counter; this.counter<= elementsToCharge; this.counter++){ //cargo los elementos a mostrar\n          this.photos.push(this.gallery[this.counter])\n        }      \n      },\n      remove(item){ //eliminamos el elemento del array\n        this.photos.splice(item,1)\n        if(this.photos.length <= 41) {  //en caso que el numero de elementos sea menor que x cargo mas elementos automaticamente\n          this.loadPhotos()\n        }\n      }\n    }\n}\n</script>\n<style scoped>\n\n</style>\n"]},"metadata":{},"sourceType":"module"}